[api]
auth_backend = airflow.api.auth.backend.basic_auth

[core]
executor = CeleryExecutor
dags_are_paused_at_creation = True
load_examples = False
load_default_connections = False

[celery]
broker_url = sqs://
celery_config_options = deploy_airflow_on_ecs_fargate.celery_config.CELERY_CONFIG

[webserver]
dag_default_view = graph
expose_config = True
dag_orientation = TB

[scheduler]
catchup_by_default = False

[logging]
logging_config_class = deploy_airflow_on_ecs_fargate.logging_config.STDOUT_LOGGING_CONFIG
task_log_reader = stdout
logging_level = DEBUG

[secrets]
# AWS Secrets Manager Backend
# https://airflow.apache.org/docs/apache-airflow-providers-amazon/stable/secrets-backends/aws-secrets-manager.html
# Setting full_url_mode to false allows us to use multiple fields when storing connections
# Source code: https://github.com/apache/airflow/blob/main/airflow/providers/amazon/aws/secrets/secrets_manager.py
backend = airflow.providers.amazon.aws.secrets.secrets_manager.SecretsManagerBackend
backend_kwargs = {"connections_prefix": "deploy-airflow-on-ecs-fargate/airflow/connections", "variables_prefix": "deploy-airflow-on-ecs-fargate/airflow/variables", "config_prefix": "deploy-airflow-on-ecs-fargate/airflow/config", "full_url_mode": true}
