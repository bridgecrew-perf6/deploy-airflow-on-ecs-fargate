[api]
auth_backend = airflow.api.auth.backend.basic_auth

[core]
executor = CeleryExecutor
# Store sensitive data with secrets backend
# https://airflow.apache.org/docs/apache-airflow/stable/howto/set-config.html
sql_alchemy_conn_secret = sql_alchemy_conn
fernet_key_secret = fernet_key
dags_are_paused_at_creation = True
load_examples = True
load_default_connections = False

[celery]
result_backend_secret = result_backend
broker_url_secret = broker_url

[webserver]
dag_default_view = graph
expose_config = True
reload_on_plugin_change = True
dag_orientation = TB

[scheduler]
catchup_by_default = False

[logging]
logging_config_class = deploy_airflow_on_ecs_fargate.logging_config.STDOUT_LOGGING_CONFIG
task_log_reader = stdout
logging_level = DEBUG

[secrets]
# AWS Secrets Manager Backend
# https://airflow.apache.org/docs/apache-airflow-providers-amazon/stable/secrets-backends/aws-secrets-manager.html
# Setting full_url_mode to false allows us to use multiple fields when storing connections
# Source code: https://github.com/apache/airflow/blob/main/airflow/providers/amazon/aws/secrets/secrets_manager.py
backend = airflow.providers.amazon.aws.secrets.secrets_manager.SecretsManagerBackend
backend_kwargs = {"connections_prefix": "airflow/connections", "variables_prefix": "airflow/variables", "config_prefix": "airflow/config", "full_url_mode": false}
